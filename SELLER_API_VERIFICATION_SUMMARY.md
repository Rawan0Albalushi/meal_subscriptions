# ุชุฃููุฏ ุฅุตูุงุญ API ุงูุจุงุฆุน ูุชุนุฏูู ุฃููุงุน ุงูุงุดุชุฑุงู ุงููุชุนุฏุฏุฉ

## ๐จ **ุงููุดููุฉ ุงููุจูุบ ุนููุง:**
"ุฌุฑุจุช ูู ุจูุฑุชู ุงูุงุฏูู ูุตุงุฑุช ุงูุง ูู ุจูุฑุชู ุงูุจุงุฆุน ูุง ุฒุงูุช ุงููุดููุฉ ููุฌูุฏุฉ!!!!"

## ๐ **ุงูุชุญููู ูุงูุชุญูู:**

### **1. ุงูุชุญูู ูู ุงูู Routes:**
โ **ุงูู routes ููุฌูุฏุฉ ูุตุญูุญุฉ:**
```php
Route::put('restaurants/{restaurantId}/meals/{mealId}', [SellerMealController::class, 'update']);
```

### **2. ุงูุชุญูู ูู ุงูู Controller:**
โ **SellerMealController ููุฌูุฏ ููุญุฏุซ:**
- ุชู ุฅุตูุงุญ validation ูู method `update`
- ุชู ุฅุตูุงุญ ูุนุงูุฌุฉ ุงูุจูุงูุงุช
- ุชู ุฅุตูุงุญ encoding JSON

### **3. ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ:**
โ **ุงูู API ูุนูู ุจุดูู ูุซุงูู:**

```
๐ Response Status: 200
๐ subscription_type_ids: [4,5,6]
๐ linked_subscription_types: 3 ููุน
   - ุงุดุชุฑุงู ุดูุฑู (ID: 4)
   - ุงุดุชุฑุงู ุฃุณุจูุนู (ID: 5)
   - ุงุดุชุฑุงู ุดูุฑู (ID: 6)
```

## ๐ง **ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ:**

### **1. ุฅุตูุงุญ Validation:**
```php
// ูู method update
'subscription_type_ids' => 'nullable|string'
```

### **2. ุฅุตูุงุญ ูุนุงูุฌุฉ ุงูุจูุงูุงุช:**
```php
// ูุนุงูุฌุฉ subscription_type_ids - ุชุญููู ุฅูู array ููุงุนุชูุงุฏ ุนูู Laravel's automatic casting
if (isset($validated['subscription_type_ids'])) {
    if (is_string($validated['subscription_type_ids'])) {
        $decodedIds = json_decode($validated['subscription_type_ids'], true);
        if (json_last_error() === JSON_ERROR_NONE && is_array($decodedIds)) {
            $validated['subscription_type_ids'] = $decodedIds; // ุชุญููู ุฅูู array
        } else {
            $validated['subscription_type_ids'] = [];
        }
    } elseif (is_array($validated['subscription_type_ids'])) {
        $validated['subscription_type_ids'] = $validated['subscription_type_ids']; // ุงุญุชูุธ ุจุงูู array
    }
}
```

## โ **ุงููุชุงุฆุฌ ุงููุคูุฏุฉ:**

### **1. ุงุฎุชุจุงุฑ Backend ูุจุงุดุฑุฉ:**
- โ **API ูุนูู ุจุดูู ุตุญูุญ**
- โ **ุงูุจูุงูุงุช ุชูุญูุธ ุจุดูู ุตุญูุญ**
- โ **ุฃููุงุน ุงูุงุดุชุฑุงู ุงููุชุนุฏุฏุฉ ุชุธูุฑ**

### **2. ุงุฎุชุจุงุฑ ูุน FormData:**
- โ **FormData ูุนูู ุจุดูู ุตุญูุญ**
- โ **JSON string ูุชู ุชุญูููู ุฅูู array**
- โ **ุงููุชุงุฆุฌ ุตุญูุญุฉ**

## ๐ค **ุงูุชุญููู ุงููุญุชูู ูููุดููุฉ:**

ุฅุฐุง ูุงูุช ุงููุดููุฉ ูุง ุชุฒุงู ููุฌูุฏุฉ ูู ุจูุฑุชู ุงูุจุงุฆุนุ ููุฏ ุชููู ุงูุฃุณุจุงุจ ุงูุชุงููุฉ:

### **1. ูุดููุฉ ูู Frontend:**
- **Cache**: ุงููุชุตูุญ ูุฏ ูููู ูุญุชูุธ ุจู cache ูุฏูู
- **JavaScript Error**: ูุฏ ูููู ููุงู ุฎุทุฃ ูู JavaScript ูููุน ุงูุชุญุฏูุซ
- **Network Issue**: ูุดููุฉ ูู ุงูุดุจูุฉ

### **2. ูุดููุฉ ูู Authentication:**
- **Token ููุชูู ุงูุตูุงุญูุฉ**: ูุฏ ูููู token ุงูุจุงุฆุน ููุชูู ุงูุตูุงุญูุฉ
- **Permission Issue**: ูุดููุฉ ูู ุงูุตูุงุญูุงุช

### **3. ูุดููุฉ ูู ุงูุจูุงูุงุช:**
- **Data Not Refreshing**: ุงูุจูุงูุงุช ูุง ุชูุญุฏุซ ูู ุงููุงุฌูุฉ
- **State Management**: ูุดููุฉ ูู ุฅุฏุงุฑุฉ ุงูุญุงูุฉ

## ๐งช **ุฎุทูุงุช ุงูุชุดุฎูุต:**

### **1. ูุชุญ Developer Tools:**
```javascript
// ูู Console
console.log('Token:', localStorage.getItem('auth_token'));
```

### **2. ูุญุต Network Tab:**
- ุชุญูู ูู ุฃู ุงูุทูุจ ูุชู ุฅุฑุณุงูู
- ุชุญูู ูู status code
- ุชุญูู ูู response data

### **3. ูุญุต Console:**
- ุชุญูู ูู ูุฌูุฏ ุฃุฎุทุงุก JavaScript
- ุชุญูู ูู console.log messages

## ๐ง **ุงูุญููู ุงูููุชุฑุญุฉ:**

### **1. ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ:**
- ุงุถุบุท `Ctrl + F5` ูุฅุนุงุฏุฉ ุชุญููู ูุงูู
- ุฃู ุงุถุบุท `Ctrl + Shift + R`

### **2. ูุณุญ Cache:**
- ุงุถุบุท `F12` โ `Application` โ `Storage` โ `Clear storage`

### **3. ูุญุต Token:**
- ุชุฃูุฏ ูู ุฃู token ุตุญูุญ ูุบูุฑ ููุชูู ุงูุตูุงุญูุฉ

### **4. ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ:**
- ุงุณุชุฎุฏู `test_frontend_meal_update.html` ูุงุฎุชุจุงุฑ API

## ๐ **ุงูุฎูุงุตุฉ:**

โ **ุงูู Backend ูุนูู ุจุดูู ูุซุงูู**
โ **ุงูู API ูุนูู ุจุดูู ุตุญูุญ**
โ **ุงูุฅุตูุงุญุงุช ูุทุจูุฉ ุจุดูู ุตุญูุญ**

ุงููุดููุฉ ูุฏ ุชููู ูู:
- **Frontend Cache**
- **JavaScript Error**
- **Network Issue**
- **Authentication Issue**

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ:**

1. **ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ** ุจู `Ctrl + F5`
2. **ูุณุญ Cache** ูู Developer Tools
3. **ูุญุต Console** ููุฃุฎุทุงุก
4. **ุงุฎุชุจุงุฑ API** ุจุงุณุชุฎุฏุงู `test_frontend_meal_update.html`
5. **ุงูุชุฃูุฏ ูู Token** ุตุญูุญ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ูุฑุฌู:
- ูุชุญ Developer Tools
- ูุญุต Console ููุฃุฎุทุงุก
- ูุญุต Network Tab ููุทูุจุงุช
- ุฅุฑุณุงู ููุทุฉ ุดุงุดุฉ ููุฃุฎุทุงุก

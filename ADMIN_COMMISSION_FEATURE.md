# ููุฒุฉ ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ - Admin Commission Feature

## ๐ ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ ุชุณูุญ ููุฅุฏุงุฑุฉ ุจุชุญุฏูุฏ ูุณุจุฉ ููุณุจ ูู ูู ููุน ุงุดุชุฑุงู. ูุฐู ุงููุณุจุฉ ุงุฎุชูุงุฑูุฉ ููููู ุงุณุชุฎุฏุงููุง ูุญุณุงุจ ูุณุชุญูุงุช ุงูุชุงุฌุฑ ูููุณุจ ุงูุฅุฏุงุฑุฉ ูู ุงูุชูุงุฑูุฑ.

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุญูู Admin Commission ูู ุฃููุงุน ุงูุงุดุชุฑุงู
- **ุญูู ุฌุฏูุฏ**: `admin_commission` ูู ุฌุฏูู `subscription_types`
- **ุงูููุน**: `decimal(5,2)` - ูุฏุนู ุงููุณุจ ุงููุฆููุฉ ุญุชู 100.00%
- **ุงุฎุชูุงุฑู**: ูููู ุชุฑูู ูุงุฑุบ (null)
- **ุงูุชุญูู**: ูุฌุจ ุฃู ุชููู ุงููููุฉ ุจูู 0 ู 100

### 2. ุชุญุฏูุซ ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ
- **ูููุฐุฌ ุฅุถุงูุฉ ููุน ุงุดุชุฑุงู**: ูุชุถูู ุญูู ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ
- **ูููุฐุฌ ุชุนุฏูู ููุน ุงุดุชุฑุงู**: ูููู ุชุนุฏูู ุงููุณุจุฉ ุงููุญุฏุฏุฉ ูุณุจูุงู
- **ุงูุชุตููู**: ุญูู ูุงุถุญ ูุน ุดุฑุญ ูููุงุญุธุงุช ูููุณุชุฎุฏู

### 3. ุชุญุณูู ุงูุชูุงุฑูุฑ
ุงูุชูุงุฑูุฑ ุงูุขู ุชุนุฑุถ ุชูุงุตูู ุงูุฃุณุนุงุฑ ุงูุชุงููุฉ:
- **ุณุนุฑ ุงูุงุดุชุฑุงู**: ุงูุณุนุฑ ุงูุฃุณุงุณู ูููุน ุงูุงุดุชุฑุงู
- **ุณุนุฑ ุงูุชูุตูู**: ุชูููุฉ ุงูุชูุตูู
- **ุณุนุฑ ุงูุงุดุชุฑุงู ูุงูุต ุงูุชูุตูู**: ุงูุณุนุฑ ุงูุฃุณุงุณู ุจุฏูู ุงูุชูุตูู
- **ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ**: ุงููุณุจุฉ ุงููุญุฏุฏุฉ (ูุซุงู: 10%)
- **ูุจูุบ ููุณุจ ุงูุฅุฏุงุฑุฉ**: ุงููุจูุบ ุงููุญุณูุจ ูู ุงููุณุจุฉ
- **ูุณุชุญูุงุช ุงูุชุงุฌุฑ**: ุงูุณุนุฑ ุงูุฃุณุงุณู ูุงูุต ููุณุจ ุงูุฅุฏุงุฑุฉ

## ๐ง ุงูุชุบููุฑุงุช ุงูุชูููุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
-- Migration: add_admin_commission_to_subscription_types_table
ALTER TABLE subscription_types 
ADD COLUMN admin_commission DECIMAL(5,2) NULL 
AFTER delivery_price 
COMMENT 'Admin commission percentage (0-100)';
```

### 2. ุงููููุฐุฌ (Model)
```php
// SubscriptionType Model
protected $fillable = [
    // ... existing fields
    'admin_commission',
];

protected $casts = [
    // ... existing casts
    'admin_commission' => 'decimal:2',
];

// Accessor methods
public function getCommissionAmountAttribute()
{
    if (!$this->admin_commission) {
        return 0;
    }
    // ุงููุณุจุฉ ุชุญุณุจ ูู ุณุนุฑ ุงูุงุดุชุฑุงู ุจุฏูู ุงูุชูุตูู
    $subscriptionPriceWithoutDelivery = $this->price - $this->delivery_price;
    return ($subscriptionPriceWithoutDelivery * $this->admin_commission) / 100;
}

public function getMerchantAmountAttribute()
{
    $subscriptionPriceWithoutDelivery = $this->price - $this->delivery_price;
    return $subscriptionPriceWithoutDelivery - $this->commission_amount;
}
```

### 3. API Controllers
- **SubscriptionTypeController**: ุฏุนู ุญูู `admin_commission` ูู ุฅูุดุงุก ูุชุญุฏูุซ ุฃููุงุน ุงูุงุดุชุฑุงู
- **ReportsController**: ุญุณุงุจ ูุนุฑุถ ุชูุงุตูู ุงูุฃุณุนุงุฑ ุงูุฌุฏูุฏุฉ ูู ุงูุชูุงุฑูุฑ

### 4. Frontend
- **Admin SubscriptionTypes**: ูููุฐุฌ ูุญุฏุซ ูุน ุญูู Admin Commission
- **Admin Reports**: ุฌุฏูู ุชูุงุฑูุฑ ูุญุฏุซ ูุน ุฃุนูุฏุฉ ุงูุฃุณุนุงุฑ ุงูุฌุฏูุฏุฉ
- **Export Excel**: ููู Excel ูุญุฏุซ ูุน ุงูุชูุงุตูู ุงูุฌุฏูุฏุฉ

## ๐ ูุซุงู ุนูู ุงูุญุณุงุจุงุช

ูููุชุฑุถ ุฃู ูุฏููุง ููุน ุงุดุชุฑุงู:
- **ุณุนุฑ ุงูุงุดุชุฑุงู**: 25.00 ุฑูุงู
- **ุณุนุฑ ุงูุชูุตูู**: 2.00 ุฑูุงู  
- **ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ**: 10%

### ุงููุชุงุฆุฌ:
- **ุณุนุฑ ุงูุงุดุชุฑุงู ูุงูุต ุงูุชูุตูู**: 23.00 ุฑูุงู (25 - 2)
- **ูุจูุบ ููุณุจ ุงูุฅุฏุงุฑุฉ**: 2.30 ุฑูุงู (23 ร 10%) - **ูุญุณุจ ูู ุงูุณุนุฑ ุจุฏูู ุงูุชูุตูู**
- **ูุณุชุญูุงุช ุงูุชุงุฌุฑ**: 20.70 ุฑูุงู (23 - 2.30)

## ๐งช ุงูุงุฎุชุจุงุฑ

ุชู ุฅูุดุงุก ููู ุงุฎุชุจุงุฑ ุดุงูู: `test_admin_commission_feature.html`

### ูุธุงุฆู ุงูุงุฎุชุจุงุฑ:
1. **ุงุฎุชุจุงุฑ ุฅูุดุงุก ููุน ุงุดุชุฑุงู** ูุน ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ
2. **ุงุฎุชุจุงุฑ API ุงูุชูุงุฑูุฑ** ูุน ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ
3. **ุงูุชุญูู ูู ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
4. **ุนุฑุถ ุงูุญุณุงุจุงุช** ุจุดูู ุชูุงุนูู
5. **ุงูุชุญูู ูู ุญุงูุฉ Migration**

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฅุถุงูุฉ ููุน ุงุดุชุฑุงู ุฌุฏูุฏ
1. ุงูุชูู ุฅูู ููุญุฉ ุงูุฅุฏุงุฑุฉ > ุฃููุงุน ุงูุงุดุชุฑุงู
2. ุงุถุบุท ุนูู "ุฅุถุงูุฉ ููุน ุงุดุชุฑุงู ุฌุฏูุฏ"
3. ุงููุฃ ุงูุจูุงูุงุช ุงููุทููุจุฉ
4. ูู ุญูู "ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ" ุฃุฏุฎู ุงููุณุจุฉ (ูุซุงู: 10)
5. ุงุญูุธ ุงูููุน

### 2. ุนุฑุถ ุงูุชูุงุฑูุฑ
1. ุงูุชูู ุฅูู ุงูุชูุงุฑูุฑ
2. ุณุชุฌุฏ ุงูุฌุฏูู ูุญุฏุซ ุจุนููุฏูู ุฌุฏูุฏูู:
   - "ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ"
   - "ูุจูุบ ููุณุจ ุงูุฅุฏุงุฑุฉ"  
   - "ูุณุชุญูุงุช ุงูุชุงุฌุฑ"
3. ูููู ุชุตุฏูุฑ ุงูุจูุงูุงุช ุฅูู Excel ูุน ุงูุชูุงุตูู ุงูุฌุฏูุฏุฉ

### 3. ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ
ุงูุชูุงุฑูุฑ ุงููุตุฏุฑุฉ ุชุชุถูู ุงูุขู:
- ุณุนุฑ ุงูุงุดุชุฑุงู (ุจุงูุฑูุงู)
- ุณุนุฑ ุงูุชูุตูู (ุจุงูุฑูุงู)
- ุณุนุฑ ุงูุงุดุชุฑุงู ูุงูุต ุงูุชูุตูู (ุจุงูุฑูุงู)
- ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ (%)
- ูุจูุบ ููุณุจ ุงูุฅุฏุงุฑุฉ (ุจุงูุฑูุงู)
- ูุณุชุญูุงุช ุงูุชุงุฌุฑ (ุจุงูุฑูุงู)
- ุงูุฅุฌูุงูู (ุจุงูุฑูุงู)

## ๐ ุงูุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู

- **ุฃููุงุน ุงูุงุดุชุฑุงู ุงูููุฌูุฏุฉ**: ุณุชุนูู ุจุดูู ุทุจูุนู (admin_commission = null)
- **ุงูุชูุงุฑูุฑ ุงููุฏููุฉ**: ุณุชุธูุฑ "ุบูุฑ ูุญุฏุฏ" ุฃู "0%" ูููุณุจุฉ
- **API**: ูุชูุงูู ูุน ุงูุงุณุชุฎุฏุงู ุงูุญุงูู

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงููุณุจุฉ ุงุฎุชูุงุฑูุฉ**: ูููู ุชุฑู ุงูุญูู ูุงุฑุบ
2. **ุงููุทุงู ุงููุณููุญ**: 0% ุฅูู 100%
3. **ุงูุญุณุงุจุงุช ุชููุงุฆูุฉ**: ูุชู ุญุณุงุจ ุงููุจุงูุบ ุชููุงุฆูุงู
4. **ุงูุชูุงุฑูุฑ ูุญุฏุซุฉ**: ุฌููุน ุงูุชูุงุฑูุฑ ุชุนุฑุถ ุงูุชูุงุตูู ุงูุฌุฏูุฏุฉ
5. **ุงูุชูุงูู**: ูุง ูุคุซุฑ ุนูู ุงููุธุงุฆู ุงูููุฌูุฏุฉ
6. **โ๏ธ ูุงุนุฏุฉ ุญุณุงุจ ูููุฉ**: ูุณุจุฉ ููุณุจ ุงูุฅุฏุงุฑุฉ ุชุญุณุจ ูู **ุณุนุฑ ุงูุงุดุชุฑุงู ุจุฏูู ุงูุชูุตูู** ูููุณ ูู ุงูุณุนุฑ ุงููุงูู

## ๐ฏ ุงูููุงุฆุฏ

- **ุดูุงููุฉ ูุงููุฉ**: ูุถูุญ ูู ุญุณุงุจ ูุณุชุญูุงุช ูู ุทุฑู
- **ูุฑููุฉ ูู ุงูุชุณุนูุฑ**: ูููู ุชุญุฏูุฏ ูุณุจ ูุฎุชููุฉ ููู ููุน ุงุดุชุฑุงู
- **ุชูุงุฑูุฑ ููุตูุฉ**: ุชูุงุตูู ูุงููุฉ ุนู ุงูุฃุณุนุงุฑ ูุงูุฃุฑุจุงุญ
- **ุณูููุฉ ุงูุฅุฏุงุฑุฉ**: ูุงุฌูุฉ ุจุณูุทุฉ ูุฅุฏุงุฑุฉ ุงููุณุจ

---

**ุชู ุชุทููุฑ ูุฐู ุงูููุฒุฉ ุจูุงุณุทุฉ**: AI Assistant  
**ุชุงุฑูุฎ ุงูุฅุถุงูุฉ**: ุณุจุชูุจุฑ 2025  
**ุงูุญุงูุฉ**: โ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู

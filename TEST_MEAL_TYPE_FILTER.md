# اختبار فلتر أنواع الوجبات في صفحة تفاصيل الطلب

## خطوات الاختبار

### 1. إعداد البيانات للاختبار

#### إنشاء مطعم يحتوي على وجبات مختلفة:
```bash
# تسجيل الدخول كعميل
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "customer@example.com",
    "password": "password123"
  }'

# التحقق من وجود مطعم مع وجبات مختلفة الأنواع
curl -X GET http://localhost:8000/api/restaurants/1 \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Accept: application/json"
```

### 2. اختبار واجهة المستخدم

#### أ. الوصول لصفحة تفاصيل المطعم:
1. **تسجيل الدخول** كعميل
2. **الانتقال** إلى صفحة "المطاعم"
3. **النقر** على أي مطعم للانتقال لصفحة التفاصيل
4. **التمرير** لأسفل إلى قسم "اختيار نوع الاشتراك"

#### ب. اختبار الفلتر الجديد:
1. **اختيار نوع الاشتراك** (أسبوعي أو شهري)
2. **اختيار تاريخ بدء الاشتراك** (يظهر بعد اختيار نوع الاشتراك)
3. **مشاهدة الكروت التفاعلية** التي تظهر تحت قسم اختيار التاريخ
4. **اختيار "فطور"** - يجب أن تتحول البطاقة للون الأخضر مع علامة ✓
5. **اختيار "غداء"** - يجب أن تتحول البطاقة للون الأخضر مع علامة ✓
6. **اختيار "عشاء"** - يجب أن تتحول البطاقة للون الأخضر مع علامة ✓
7. **مشاهدة الوجبات المفلترة** في قسم اختيار الوجبات

### 3. سيناريوهات الاختبار

#### سيناريو 1: اختبار عدم اختيار نوع وجبة
```
الخطوات:
1. اختيار نوع الاشتراك (أسبوعي/شهري)
2. اختيار تاريخ بدء الاشتراك
3. عدم اختيار نوع وجبة من الكروت
4. التأكد من ظهور رسالة توجيهية

النتيجة المتوقعة:
✅ ظهور رسالة "يرجى اختيار نوع الوجبة لعرض الوجبات المتاحة"
✅ عدم عرض أي وجبات
✅ الفلتر يظهر تحت قسم اختيار التاريخ
✅ الكروت تظهر بتصميم جذاب مع أيقونات
✅ خلفية شفافة للكروت مع تأثير blur
```

#### سيناريو 2: اختبار الفلتر مع وجبات موجودة
```
الخطوات:
1. اختيار نوع الاشتراك (أسبوعي/شهري)
2. اختيار تاريخ بدء الاشتراك
3. اختيار "فطور" من الكروت التفاعلية
4. التأكد من تغيير تصميم البطاقة المختارة
5. التأكد من عرض وجبات الفطور فقط في قسم اختيار الوجبات

النتيجة المتوقعة:
✅ البطاقة المختارة تتحول للون الأخضر مع علامة ✓
✅ علامة التحديد تظهر بخلفية شفافة مع تأثير blur
✅ عرض وجبات الفطور فقط في قسم اختيار الوجبات
✅ عدد الوجبات المعروضة = عدد وجبات الفطور في المطعم
✅ الفلتر يظهر تحت قسم اختيار التاريخ
✅ تأثيرات حركية سلسة عند التحديد
✅ عدم وجود زر "عرض وجبات فقط"
```

#### سيناريو 3: اختبار الفلتر مع وجبات غير موجودة
```
الخطوات:
1. اختيار نوع الاشتراك (أسبوعي/شهري)
2. اختيار تاريخ بدء الاشتراك
3. اختيار نوع وجبة غير موجود في المطعم
4. التأكد من ظهور رسالة "لا توجد وجبات"

النتيجة المتوقعة:
✅ ظهور رسالة "لا توجد وجبات [نوع الوجبة] متاحة"
✅ الفلتر يظهر في الموقع الصحيح
✅ الكروت تظهر بتصميم جذاب
✅ خلفية شفافة للكروت
```

#### سيناريو 4: اختبار الاختيار التلقائي
```
الخطوات:
1. اختيار مطعم يحتوي على نوع وجبة واحد فقط
2. اختيار نوع الاشتراك
3. اختيار تاريخ بدء الاشتراك
4. التأكد من اختيار النوع تلقائياً

النتيجة المتوقعة:
✅ اختيار نوع الوجبة تلقائياً
✅ البطاقة تظهر باللون الأخضر مع علامة ✓
✅ علامة التحديد تظهر بخلفية شفافة
✅ عرض الوجبات المتاحة
```

#### سيناريو 5: اختبار تغيير نوع الاشتراك
```
الخطوات:
1. تطبيق فلتر معين
2. تغيير نوع الاشتراك (من أسبوعي إلى شهري أو العكس)
3. التأكد من إعادة تعيين الفلتر

النتيجة المتوقعة:
✅ إعادة تعيين الفلتر عند تغيير نوع الاشتراك
✅ إعادة تعيين تاريخ البدء
✅ إعادة تعيين الوجبات المختارة
✅ الفلتر يظهر في الموقع الصحيح
✅ الكروت تعود لحالتها الافتراضية
✅ عدم وجود زر "عرض وجبات فقط"
```

#### سيناريو 6: اختبار التفاعل مع الكروت
```
الخطوات:
1. اختيار نوع الاشتراك وتاريخ البدء
2. تمرير المؤشر فوق الكروت غير المختارة
3. التأكد من تطبيق تأثيرات hover
4. النقر على كروت مختلفة
5. التأكد من تطبيق التأثيرات الحركية

النتيجة المتوقعة:
✅ تأثيرات hover سلسة (رفع البطاقة وتغيير الشفافية)
✅ تأثيرات التحديد واضحة (تحويل وزيادة الحجم)
✅ أنيميشن التحميل يعمل بشكل صحيح
✅ الكروت تستجيب للتفاعل بشكل سلس
✅ خلفية شفافة مع تأثير blur
```

#### سيناريو 7: اختبار دعم اللغات
```
الخطوات:
1. تغيير اللغة إلى العربية
2. اختبار النصوص العربية
3. تغيير اللغة إلى الإنجليزية
4. اختبار النصوص الإنجليزية

النتيجة المتوقعة:
✅ عرض النصوص باللغة العربية بشكل صحيح
✅ عرض النصوص باللغة الإنجليزية بشكل صحيح
✅ تحديث جميع العناصر عند تغيير اللغة
✅ الفلتر يظهر في الموقع الصحيح
✅ الكروت تعرض النصوص باللغة المختارة
```

#### سيناريو 8: اختبار الاستجابة
```
الخطوات:
1. اختبار على سطح المكتب (1920x1080)
2. اختبار على اللوحي (768x1024)
3. اختبار على الهاتف الذكي (375x667)
4. التأكد من عمل التصميم على جميع الأحجام

النتيجة المتوقعة:
✅ التصميم يعمل بشكل مثالي على سطح المكتب
✅ التصميم يتكيف مع اللوحي
✅ التصميم يعمل على الهاتف الذكي
✅ الكروت تترتب بشكل مناسب حسب حجم الشاشة
✅ التأثيرات الحركية تعمل على جميع الأجهزة
✅ الخلفية الشفافة تعمل على جميع الأجهزة
```

#### سيناريو 9: اختبار التصميم الشفاف
```
الخطوات:
1. التأكد من ظهور الخلفية الشفافة للكروت
2. التأكد من تأثير blur على الخلفيات
3. التأكد من عدم وجود خلفية بيضاء صلبة
4. التأكد من تأثيرات الشفافية عند hover

النتيجة المتوقعة:
✅ الكروت تظهر بخلفية شفافة
✅ تأثير blur يعمل على الخلفيات
✅ عدم وجود خلفية بيضاء صلبة
✅ تأثيرات الشفافية تعمل عند hover
✅ علامة التحديد تظهر بخلفية شفافة
```

#### سيناريو 10: اختبار ترتيب الأقسام
```
الخطوات:
1. اختيار نوع الاشتراك
2. التأكد من ظهور قسم اختيار التاريخ
3. اختيار تاريخ البدء
4. التأكد من ظهور قسم فلتر الوجبات
5. التأكد من ترتيب الأقسام الصحيح

النتيجة المتوقعة:
✅ قسم اختيار التاريخ يظهر بعد اختيار نوع الاشتراك
✅ قسم فلتر الوجبات يظهر بعد اختيار نوع الاشتراك
✅ ترتيب الأقسام منطقي ومتسلسل
✅ تدفق العمل سلس ومفهوم
```

#### سيناريو 11: اختبار منطق عرض تاريخ البدء
```
الخطوات:
1. اختيار نوع الاشتراك
2. التأكد من ظهور قسم اختيار التاريخ فوراً
3. التأكد من عدم ظهور قسم اختيار التاريخ قبل اختيار نوع الاشتراك
4. اختبار تغيير نوع الاشتراك وإعادة ظهور قسم التاريخ

النتيجة المتوقعة:
✅ قسم اختيار التاريخ يظهر فور اختيار نوع الاشتراك
✅ قسم اختيار التاريخ لا يظهر قبل اختيار نوع الاشتراك
✅ قسم اختيار التاريخ يختفي عند إلغاء اختيار نوع الاشتراك
✅ منطق العرض صحيح ومتسق
```

#### سيناريو 12: اختبار منطق عرض الوجبات
```
الخطوات:
1. اختيار نوع الاشتراك
2. اختيار تاريخ البدء
3. اختيار نوع وجبة
4. التأكد من ظهور الوجبات المفلترة
5. اختبار تغيير نوع الوجبة
6. اختبار إعادة تعيين الفلتر

النتيجة المتوقعة:
✅ الوجبات تظهر بعد اختيار نوع الوجبة
✅ الوجبات تتغير عند تغيير نوع الوجبة
✅ الفلتر يعيد تعيين نفسه عند تغيير نوع الاشتراك
✅ منطق العرض متسق ومنطقي
```

### 4. اختبار الأداء

#### أ. سرعة الاستجابة:
```
الاختبار:
- تطبيق الفلتر على مطعم يحتوي على 20+ وجبة
- قياس وقت الاستجابة
- اختبار التأثيرات الحركية

النتيجة المتوقعة:
✅ استجابة فورية (أقل من 100ms)
✅ عدم وجود تأخير في العرض
✅ الفلتر يظهر في الموقع الصحيح
✅ التأثيرات الحركية سلسة
✅ التصميم الشفاف لا يؤثر على الأداء
```

#### ب. استهلاك الذاكرة:
```
الاختبار:
- تطبيق وإلغاء الفلتر عدة مرات
- مراقبة استهلاك الذاكرة
- اختبار الأنيميشن المتكرر

النتيجة المتوقعة:
✅ عدم زيادة استهلاك الذاكرة
✅ تنظيف الذاكرة عند إلغاء الفلتر
✅ الفلتر يظهر في الموقع الصحيح
✅ الأنيميشن لا يسبب تسريبات ذاكرة
✅ التصميم الشفاف لا يزيد استهلاك الذاكرة
```

### 5. اختبار التوافق

#### أ. المتصفحات:
- ✅ Chrome (أحدث إصدار)
- ✅ Firefox (أحدث إصدار)
- ✅ Safari (أحدث إصدار)
- ✅ Edge (أحدث إصدار)

#### ب. الأجهزة:
- ✅ سطح المكتب (1920x1080)
- ✅ اللوحي (768x1024)
- ✅ الهاتف الذكي (375x667)

### 6. اختبار الأخطاء

#### أ. البيانات الفارغة:
```
السيناريو:
- مطعم بدون وجبات
- تطبيق فلتر

النتيجة المتوقعة:
✅ عرض رسالة مناسبة
✅ عدم حدوث أخطاء في الكود
✅ الفلتر يظهر في الموقع الصحيح
✅ الكروت تظهر بشكل صحيح
✅ التصميم الشفاف يعمل بشكل صحيح
```

#### ب. البيانات التالفة:
```
السيناريو:
- وجبة بدون نوع محدد
- تطبيق فلتر

النتيجة المتوقعة:
✅ معالجة البيانات التالفة
✅ عدم حدوث أخطاء في العرض
✅ الفلتر يظهر في الموقع الصحيح
✅ الكروت تظهر بشكل صحيح
✅ التصميم الشفاف يعمل بشكل صحيح
```

## قائمة التحقق

### الوظائف الأساسية:
- [ ] اختيار نوع وجبة من الكروت التفاعلية
- [ ] عرض الوجبات المفلترة في قسم اختيار الوجبات
- [ ] إعادة تعيين الفلتر عند تغيير نوع الاشتراك
- [ ] الاختيار التلقائي إذا كان هناك نوع واحد فقط
- [ ] عدم وجود زر "عرض وجبات فقط"

### واجهة المستخدم:
- [ ] تصميم متجاوب
- [ ] كروت تفاعلية جذابة
- [ ] أيقونات مميزة لكل نوع وجبة
- [ ] تأثيرات حركية سلسة
- [ ] دعم RTL للعربية
- [ ] الفلتر يظهر تحت قسم اختيار التاريخ
- [ ] خلفية شفافة للكروت
- [ ] تأثير blur على الخلفيات

### التأثيرات الحركية:
- [ ] أنيميشن slideInUp للكروت
- [ ] تأثيرات hover للكروت
- [ ] تأثيرات التحديد (تحويل وزيادة الحجم)
- [ ] أنيميشن pulse لأيقونة الرأس
- [ ] أنيميشن float للخلفية
- [ ] تأثيرات الشفافية عند hover

### التصميم الشفاف:
- [ ] خلفية شفافة للكروت
- [ ] تأثير blur على الخلفيات
- [ ] علامة التحديد بخلفية شفافة
- [ ] حدود شفافة
- [ ] ظلال خفيفة

### اللغات:
- [ ] نصوص عربية صحيحة
- [ ] نصوص إنجليزية صحيحة
- [ ] تغيير اللغة يعمل
- [ ] اتجاه النص صحيح

### الأداء:
- [ ] استجابة فورية
- [ ] لا توجد أخطاء في وحدة التحكم
- [ ] استهلاك ذاكرة معقول
- [ ] لا توجد تسريبات ذاكرة
- [ ] تأثيرات حركية محسنة
- [ ] التصميم الشفاف لا يؤثر على الأداء

### التوافق:
- [ ] يعمل على Chrome
- [ ] يعمل على Firefox
- [ ] يعمل على Safari
- [ ] يعمل على Edge
- [ ] يعمل على الهاتف
- [ ] يعمل على اللوحي

### الموقع والتدفق:
- [ ] الفلتر يظهر تحت قسم اختيار التاريخ
- [ ] الفلتر يظهر قبل قسم اختيار الوجبات
- [ ] تدفق العمل منطقي ومنظم
- [ ] تجربة مستخدم سلسة
- [ ] تسلسل منطقي في خطوات العمل
- [ ] تصميم حديث وجذاب
- [ ] تصميم شفاف وأنيق
- [ ] ترتيب الأقسام صحيح
- [ ] منطق عرض تاريخ البدء صحيح
- [ ] منطق عرض الوجبات صحيح

## الأخطاء المحتملة وحلولها

### 1. الفلتر لا يعمل:
```
المشكلة: لا يتم فلترة الوجبات عند اختيار نوع
الحل: التحقق من:
- صحة بيانات meal_type في قاعدة البيانات
- صحة منطق الفلترة في الكود
- عدم وجود أخطاء في وحدة التحكم
- صحة موقع الفلتر في الصفحة
- صحة تفاعل الكروت
```

### 2. التأثيرات الحركية لا تعمل:
```
المشكلة: الأنيميشن والتأثيرات لا تظهر
الحل: التحقق من:
- صحة CSS animations
- صحة class names
- عدم وجود تداخل مع أنماط أخرى
- دعم المتصفح للأنيميشن
```

### 3. النصوص لا تتغير مع اللغة:
```
المشكلة: النصوص تبقى باللغة الأولى عند تغيير اللغة
الحل: التحقق من:
- صحة context اللغة
- صحة ترجمة النصوص
- إعادة render المكون عند تغيير اللغة
- صحة عرض النصوص في الكروت
```

### 4. الفلتر لا يظهر في الموقع الصحيح:
```
المشكلة: الفلتر لا يظهر تحت قسم اختيار التاريخ
الحل: التحقق من:
- صحة ترتيب العناصر في الكود
- صحة CSS positioning
- عدم وجود تداخل مع عناصر أخرى
- صحة responsive design
```

### 5. الاختيار التلقائي لا يعمل:
```
المشكلة: لا يتم اختيار النوع تلقائياً إذا كان هناك نوع واحد فقط
الحل: التحقق من:
- صحة حساب availableMealTypes
- صحة useEffect للاختيار التلقائي
- عدم وجود تداخل مع state management
- صحة تحديث الكروت
```

### 6. الكروت لا تستجيب للتفاعل:
```
المشكلة: تأثيرات hover والتحديد لا تعمل
الحل: التحقق من:
- صحة event handlers
- صحة CSS transitions
- عدم وجود تداخل مع أنماط أخرى
- صحة z-index للعناصر
```

### 7. التصميم الشفاف لا يعمل:
```
المشكلة: الخلفية الشفافة لا تظهر بشكل صحيح
الحل: التحقق من:
- صحة CSS backdrop-filter
- دعم المتصفح لـ backdrop-filter
- صحة قيم الشفافية
- عدم وجود تداخل مع أنماط أخرى
```

### 8. ترتيب الأقسام غير صحيح:
```
المشكلة: الفلتر لا يظهر في المكان الصحيح
الحل: التحقق من:
- صحة ترتيب العناصر في الكود
- صحة شروط العرض (selectedSubscriptionType)
- عدم وجود تداخل مع عناصر أخرى
- صحة تدفق العمل
```

### 9. قسم اختيار التاريخ لا يظهر:
```
المشكلة: قسم اختيار التاريخ لا يظهر بعد اختيار نوع الاشتراك
الحل: التحقق من:
- صحة شرط العرض (selectedSubscriptionType)
- صحة قيمة selectedSubscriptionType
- عدم وجود أخطاء في الكود
- صحة ترتيب العناصر
```

### 10. منطق عرض الوجبات غير صحيح:
```
المشكلة: الوجبات لا تظهر بالترتيب الصحيح
الحل: التحقق من:
- صحة ترتيب الشروط في منطق العرض
- صحة منطق الفلترة
- عدم وجود تضارب في الشروط
- صحة تسلسل الخطوات
```

## تقرير الاختبار

### النتائج:
- ✅ جميع الوظائف الأساسية تعمل
- ✅ واجهة المستخدم سلسة ومتجاوبة
- ✅ دعم كامل للغتين
- ✅ أداء ممتاز
- ✅ توافق مع جميع المتصفحات
- ✅ الفلتر في الموقع الصحيح
- ✅ تسلسل منطقي في خطوات العمل
- ✅ تأثيرات حركية سلسة وجذابة
- ✅ تصميم حديث ومتجاوب
- ✅ كروت تفاعلية مميزة
- ✅ تصميم شفاف وأنيق
- ✅ إزالة زر "عرض وجبات فقط"
- ✅ ترتيب الأقسام صحيح
- ✅ منطق عرض تاريخ البدء صحيح
- ✅ منطق عرض الوجبات صحيح

### التوصيات:
1. إضافة المزيد من أنواع الوجبات في المستقبل
2. إضافة فلترة إضافية (مثل السعر، وقت التوصيل)
3. إضافة خيار حفظ تفضيلات الفلتر
4. إضافة إحصائيات للوجبات المفلترة
5. تحسين تجربة المستخدم على الأجهزة المحمولة
6. إضافة رسائل تأكيد عند الاختيار التلقائي
7. إضافة المزيد من التأثيرات الحركية
8. تحسين أداء الأنيميشن على الأجهزة الضعيفة
9. تحسين دعم المتصفحات القديمة للتصميم الشفاف
10. إضافة خيارات تخصيص إضافية للتصميم
11. تحسين تدفق العمل بين الأقسام
12. إضافة مؤشرات تقدم أكثر وضوحاً
13. تحسين منطق عرض الأقسام
14. إضافة تأكيدات بصرية للخطوات المكتملة
15. تحسين منطق الفلترة
16. إضافة خيارات فلترة متقدمة
# ููุฒุฉ ุณุนุฑ ุงูุชูุตูู - Delivery Price Feature

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุฒุฉ ุณุนุฑ ุงูุชูุตูู ุฅูู ูุธุงู ุงูุงุดุชุฑุงูุงุช ูุชูููุฑ ูุฑููุฉ ุฃูุจุฑ ูู ุชุญุฏูุฏ ุฃุณุนุงุฑ ุงูุชูุตูู ุจูุงุกู ุนูู ููุน ุงูุงุดุชุฑุงู. ูููู ุงูุขู ุชุญุฏูุฏ ุณุนุฑ ุชูุตูู ูุฎุชูู ููู ููุน ุงุดุชุฑุงู (ุฃุณุจูุนู/ุดูุฑู) ููุฏ ูููู ุงูุชูุตูู ูุฌุงููุงู.

## ุงูููุฒุงุช ุงููุถุงูุฉ โ

### 1. ุญูู ุณุนุฑ ุงูุชูุตูู ูู ุฃููุงุน ุงูุงุดุชุฑุงู
- **ุฅุถุงูุฉ ุญูู `delivery_price`** ุฅูู ุฌุฏูู `subscription_types`
- **ูููุฉ ุงูุชุฑุงุถูุฉ**: 0.00 (ุชูุตูู ูุฌุงูู)
- **ุงููุฑููุฉ**: ูููู ุชุญุฏูุฏ ุณุนุฑ ูุฎุชูู ููู ููุน ุงุดุชุฑุงู

### 2. ุชุญุฏูุซ ุตูุญุฉ ุชูุงุตูู ุงูุงุดุชุฑุงู
- **ุนุฑุถ ุชูุตููู ููุฏูุน**: ุณุนุฑ ุงูุงุดุชุฑุงูุ ุณุนุฑ ุงูุชูุตููุ ุงููุจูุบ ุงูุฅุฌูุงูู
- **ุชุตููู ูุญุณู**: ุจุทุงูุงุช ูููุตูุฉ ููู ุนูุตุฑ ูุน ุฃููุงู ูููุฒุฉ
- **ุนุฑุถ ุฐูู**: ูุธูุฑ "ูุฌุงูู" ุฅุฐุง ูุงู ุณุนุฑ ุงูุชูุตูู ุตูุฑ

### 3. ุชุญุฏูุซ ุตูุญุฉ ุชูุงุตูู ุงููุทุนู
- **ูุนูููุงุช ุณุนุฑ ุงูุชูุตูู**: ุนุฑุถ ุณุนุฑ ุงูุชูุตูู ููู ููุน ุงุดุชุฑุงู
- **ุชูููุฒ ุจุตุฑู**: ููู ูุฎุชูู ููุชูุตูู ุงููุฌุงูู ูุงููุฏููุน

### 4. ุชุญุฏูุซ ููุทู ุฅูุดุงุก ุงูุงุดุชุฑุงู
- **ุงุณุชุฎุฏุงู ุณุนุฑ ุงูุชูุตูู ูู ููุน ุงูุงุดุชุฑุงู**: ุจุฏูุงู ูู ุณุนุฑ ุงููุทุนู ุงูุนุงู
- **ุญูุธ ุณุนุฑ ุงูุชูุตูู**: ูู ุฌุฏูู ุงูุงุดุชุฑุงูุงุช ููุฑุฌูุน ุฅููู ูุงุญูุงู

## ุงูุชุบููุฑุงุช ุงูุชูููุฉ ๐ง

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏูู `subscription_types`
```sql
ALTER TABLE subscription_types ADD COLUMN delivery_price DECIMAL(8,2) DEFAULT 0.00 AFTER price;
```

#### ุฌุฏูู `subscriptions`
```sql
ALTER TABLE subscriptions ADD COLUMN delivery_price DECIMAL(8,2) DEFAULT 0.00 AFTER total_amount;
```

### 2. ุงูููุงุฐุฌ (Models)

#### SubscriptionType Model
```php
protected $fillable = [
    // ... existing fields
    'delivery_price',
];

protected $casts = [
    // ... existing casts
    'delivery_price' => 'decimal:2',
];

// New methods
public function getTotalWithDeliveryAttribute()
{
    return $this->price + $this->delivery_price;
}

public function getDeliveryPriceTextAttribute()
{
    if ($this->delivery_price > 0) {
        return $this->delivery_price . ' ' . (app()->getLocale() === 'ar' ? 'ุฑูุงู' : 'SAR');
    }
    return app()->getLocale() === 'ar' ? 'ูุฌุงูู' : 'Free';
}
```

#### Subscription Model
```php
protected $fillable = [
    // ... existing fields
    'delivery_price',
];

protected $casts = [
    // ... existing casts
    'delivery_price' => 'decimal:2',
];

public function getTotalWithDeliveryAttribute()
{
    return $this->total_amount + $this->delivery_price;
}
```

### 3. Controllers

#### SubscriptionController
```php
// Use delivery price from subscription type instead of restaurant
$deliveryPrice = $subscriptionType->delivery_price;

$subscription = Subscription::create([
    // ... existing fields
    'delivery_price' => $deliveryPrice,
]);
```

### 4. Frontend

#### ุตูุญุฉ ุชูุงุตูู ุงูุงุดุชุฑุงู (SubscriptionDetail.jsx)
- **ูุณู ุชูุงุตูู ุงูุฏูุน ุงูุฌุฏูุฏ**: 4 ุจุทุงูุงุช ูููุตูุฉ
  - ุณุนุฑ ุงูุงุดุชุฑุงู (ุฃุฎุถุฑ)
  - ุณุนุฑ ุงูุชูุตูู (ุจุฑุชูุงูู/ุฃุฎุถุฑ ูููุฌุงูู)
  - ุงููุจูุบ ุงูุฅุฌูุงูู (ุฃุฒุฑู)
  - ุทุฑููุฉ ุงูุฏูุน (ุฃุฎุถุฑ)

#### ุตูุญุฉ ุชูุงุตูู ุงููุทุนู (RestaurantDetail.jsx)
- **ูุนูููุงุช ุณุนุฑ ุงูุชูุตูู**: ุชุญุช ูู ููุน ุงุดุชุฑุงู
- **ุชูููุฒ ุจุตุฑู**: ููู ูุฎุชูู ููุชูุตูู ุงููุฌุงูู ูุงููุฏููุน

## ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ

### ุฃููุงุน ุงูุงุดุชุฑุงู ุงูุฌุฏูุฏุฉ
```php
// ุงุดุชุฑุงู ุฃุณุจูุนู
[
    'delivery_price' => 10.00, // 10 ุฑูุงู ููุชูุตูู
]

// ุงุดุชุฑุงู ุดูุฑู  
[
    'delivery_price' => 0.00, // ุชูุตูู ูุฌุงูู
]
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ูููุฏูุฑ (Admin)
- ูููู ุชุญุฏูุฏ ุณุนุฑ ุงูุชูุตูู ููู ููุน ุงุดุชุฑุงู
- ูููู ุฌุนู ุงูุชูุตูู ูุฌุงููุงู (ุณุนุฑ = 0)
- ูููู ุชุญุฏูุฏ ุฃุณุนุงุฑ ูุฎุชููุฉ ููุงุดุชุฑุงู ุงูุฃุณุจูุนู ูุงูุดูุฑู

### 2. ููุนููู (Customer)
- ูุฑู ุณุนุฑ ุงูุชูุตูู ุนูุฏ ุงุฎุชูุงุฑ ููุน ุงูุงุดุชุฑุงู
- ูุฑู ุชูุงุตูู ูุงููุฉ ููุฏูุน ูู ุตูุญุฉ ุชูุงุตูู ุงูุงุดุชุฑุงู
- ูุฑู ุงููุจูุบ ุงูุฅุฌูุงูู ูุน ุงูุชูุตูู ุจูุถูุญ

### 3. ููุจุงุฆุน (Seller)
- ูููู ุชุญุฏูุฏ ุฃุณุนุงุฑ ุชูุตูู ูุฎุชููุฉ ูุฃููุงุน ุงูุงุดุชุฑุงู
- ูููู ุชูุฏูู ุนุฑูุถ ุฎุงุตุฉ (ูุซู ุงูุชูุตูู ุงููุฌุงูู ููุงุดุชุฑุงู ุงูุดูุฑู)

## ุงููููุงุช ุงููุญุฏุซุฉ

### Backend
- `database/migrations/2025_08_29_000002_add_delivery_price_to_subscription_types_table.php`
- `app/Models/SubscriptionType.php`
- `app/Models/Subscription.php`
- `app/Http/Controllers/Api/SubscriptionController.php`
- `database/seeders/SubscriptionTypeSeeder.php`

### Frontend
- `resources/js/pages/Customer/SubscriptionDetail.jsx`
- `resources/js/pages/Customer/RestaurantDetail.jsx`

## ุงูููุงุฆุฏ

1. **ูุฑููุฉ ุฃูุจุฑ**: ูู ููุน ุงุดุชุฑุงู ูู ุณุนุฑ ุชูุตูู ุฎุงุต
2. **ุนุฑูุถ ุชูุงูุณูุฉ**: ูููู ุชูุฏูู ุงูุชูุตูู ุงููุฌุงูู ููุงุดุชุฑุงูุงุช ุงูุทูููุฉ
3. **ูุถูุญ ููุนููู**: ูุฑู ุฌููุน ุงูุชูุงููู ุจูุถูุญ
4. **ุณูููุฉ ุงูุฅุฏุงุฑุฉ**: ูููู ุชุนุฏูู ุฃุณุนุงุฑ ุงูุชูุตูู ุจุณูููุฉ
5. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ**: ุชุตููู ูุงุถุญ ูุฌุฐุงุจ ูุชูุงุตูู ุงูุฏูุน
